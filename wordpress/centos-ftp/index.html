<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  
  <title>Centos系统安装，配置Ftp服务</title>
  
  
<link href="//cdn.jsdelivr.net" rel="dns-prefetch">
<link href="//cdnjs.cloudflare.com" rel="dns-prefetch">
<link href="//at.alicdn.com" rel="dns-prefetch">
<link href="//fonts.googleapis.com" rel="dns-prefetch">
<link href="//fonts.gstatic.com" rel="dns-prefetch">    
<link href="//www.google-analytics.com" rel="dns-prefetch">  



<meta name="author" content="IMxcz.Com">
<meta name="description" content="1.安装vsftpd yum install vsftpd 2.启动/重启/关闭vsftpd服务器 [root@localhost ftp]# /sbin/service vsftpd restart Shutting down vsftpd: [ OK ] Starting vsftpd for vsftpd: [ OK ] OK表示重启成功了. 启动和关闭分别把restart改为start/stop即可."> 


<meta name="generator" content="Hugo 0.54.0">


<link rel="canonical" href="https://www.imxcz.com/wordpress/centos-ftp/"> 
<meta name="renderer" content="webkit">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="format-detection" content="telephone=no,email=no,adress=no">
<meta http-equiv="Cache-Control" content="no-transform">


<meta name="robots" content="index,follow">
<meta name="referrer" content="origin-when-cross-origin"> 
<meta name="google-site-verification" content="_moDmnnBNVLBN1rzNxyGUGdPHE20YgbmrtzLIbxaWFc"> 
<meta name="msvalidate.01" content="22596E34341DD1D17D6022C44647E587">   


<link rel="icon" href="https://www.imxcz.com/favicon.ico">


<link rel="preload" href="https://www.imxcz.com/styles/main.min.css" as="style"> 
<link href="https://fonts.googleapis.com/css?family=Josefin+Sans" rel="stylesheet">
<link rel="preload" href="https://www.imxcz.com/images/avatar.png" as="image">

<link rel="stylesheet" href="https://www.imxcz.com/styles/main.min.css"> 
<link href="https://fonts.googleapis.com/css?family=Josefin+Sans" rel="stylesheet">



<script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.2/dist/medium-zoom.min.js"></script>




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/video.js@7.3.0/dist/video-js.min.css"> 
  
  
<!--[if lte IE 8]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/videojs-ie8@1.1.2/dist/videojs-ie8.min.js"></script>
<![endif]-->

<!--[if lte IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/eligrey-classlist-js-polyfill@1.2.20180112/classList.min.js"></script>
<![endif]-->


</head>
  <body>
    
    <div class="suspension">
      <a role="button" aria-label="Go to top" title="Go to top" class="to-top is-hide"><span class="icon icon-up" aria-hidden="true"></span></a>
      
        
      
    </div>
    
    
  <header class="site-header">
  <div class="top-header">
  <img class="avatar" src="https://www.imxcz.com/images/avatar.png" alt="Avatar">
  
  <h2 class="title">幸存者IMxcz.Com</h2>
  
  
  <button class="menu-toggle" type="button" aria-label="Main Menu" aria-expanded="false" tab-index="0">
    <span class="icon icon-menu" aria-hidden="true"></span>
  </button>

  <nav class="site-menu collapsed">
    <h2 class="offscreen">Main Menu</h2>
    <ul class="menu-list">
      
      
      
      
        <li class="menu-item
          
          
          
           is-active">
          <a href="https://www.imxcz.com/">Home</a>
        </li>
      
        <li class="menu-item
          
          
          
          ">
          <a href="https://www.imxcz.com/categories/">Categories</a>
        </li>
      
        <li class="menu-item
          
          
          
          ">
          <a href="https://www.imxcz.com/archives/">Archives</a>
        </li>
      
        <li class="menu-item
          
          
          
          ">
          <a href="https://www.imxcz.com/links/">Links</a>
        </li>
      
        <li class="menu-item
          
          
          
          ">
          <a href="https://www.imxcz.com/about/">About</a>
        </li>
      
    </ul>
  </nav>
</div>
  
</header>

  <section class="main post-detail">
    <content class="content">
    <header class="post-header">
      <h1 class="post-title">Centos系统安装，配置Ftp服务</h1>
      <p class="post-meta">@IMxcz.Com · 2014/10/11 · 4 分钟 · 
              
              <a href="https://www.imxcz.com/categories/%E6%8A%80%E6%9C%AF">技术</a>
              
          </p>
    </header>
    <article class="post-content">

<h4 id="1-安装vsftpd">1.安装vsftpd</h4>

<p><code>yum install vsftpd</code></p>

<h4 id="2-启动-重启-关闭vsftpd服务器">2.启动/重启/关闭vsftpd服务器</h4>

<p><code>[root@localhost ftp]# /sbin/service vsftpd restart</code></p>

<p><code>Shutting down vsftpd: [ OK ]</code></p>

<p><code>Starting vsftpd for vsftpd: [ OK ]</code></p>

<p>OK表示重启成功了.</p>

<p>启动和关闭分别把restart改为start/stop即可.</p>

<p>如果是源码安装的,到安装文件夹下找到start.sh和shutdown.sh文件,执行它们就可以了.</p>

<h4 id="3-与vsftpd服务器有关的文件和文件夹">3.与vsftpd服务器有关的文件和文件夹</h4>

<p>vsftpd服务器的配置文件的是: <code>/etc/vsftpd/vsftpd.conf</code></p>

<p>vsftpd服务器的根目录,即FTP服务器的主目录:</p>

<p><code>[root@localhost ftp]# more /etc/passwd|grep ftp</code></p>

<p><code>ftp​:x:​14:50:FTP User:/var/ftp:/sbin/nologin</code></p>

<p>这样你就能看到FTP的服务器的目录在/var/ftp处</p>

<p>如果你想修改服务器目录的路径,那么你只要修改/var/ftp到别处就行了</p>

<h4 id="4-添加ftp本地用户">4.添加FTP本地用户</h4>

<p>有的FTP服务器需要用户名和密码才能登录,就是因为设置了FTP用户和权限.</p>

<p>FTP用户一般是不能登录系统的,只能进入FTP服务器自己的目录中,这是为了安全.这样的用户就叫做虚拟用户了.实际上并不是真正的虚拟用户,只是不能登录SHELL了而已,没能力登录系统.</p>

<p><code>/usr/sbin/adduser -d /opt/ftp -g ftp -s /sbin/nologin ftpuser</code></p>

<p>这个命令的意思是:</p>

<p>使用命令(adduser)添加ftpuser用户,不能登录系统(-s /sbin/nologin),自己的文件夹在(-d /opt/ftp)),属于组ftp(-g ftp)</p>

<p>然后你需要为它设置密码 passwd ftp</p>

<p>这样就添加了一个FTP用户了.下面的示例可以帮助你进入FTP服务器了.</p>

<p>要保证自己能读写自己的目录,就要在配置文件vsftpd.conf里设置一下就可以读写了.</p>

<pre><code>local_enable=yes
write_enable=yes
local_umask=022
</code></pre>

<h4 id="5-匿名上传下载">5.匿名上传下载</h4>

<p>修改配置文件即可vsftpd.conf,确定有以下几行,没有自己添加进去就可以了.</p>

<pre><code>anonymous_enable=yes
anon_upload_enable=yes
anon_mkdir_write_enable=yes
anon_umask=022
</code></pre>

<p>然后你可以新建一个文件夹,修改它的权限为完全开放,任何用户就可以登录这个文件夹,并上传下载文件:</p>

<pre><code>mkdir /var/ftp/guest
chmod 777 /var/ftp/guest
</code></pre>

<h4 id="6-定制进入ftp服务器的欢迎信息">6.定制进入FTP服务器的欢迎信息</h4>

<p>在vsftpd.conf文件中设置:</p>

<p><code>dirmessage_enable=yes</code></p>

<p>然后进入用户目录建立一个.message文件,输入欢迎信息即可。</p>

<h4 id="7-实现虚拟路径">7.实现虚拟路径</h4>

<p>将某个目录挂载到FTP服务器下供用户使用,这就叫做虚拟路径.</p>

<p>比如将gxl用户的目录挂载到FTP服务器中,供FTP服务器的用户使用,使用如下命令即可:</p>

<pre><code>[root@localhost opt]# mount –bind /home/gxl /var/ftp/pub #使用挂载命令
[root@localhost opt]# ls /var/ftp/pub
</code></pre>

<h4 id="8-打开vsftpd的日志功能">8.打开vsFTPd的日志功能</h4>

<p>添加下面一行到vsftpd.conf文件中,一般情况下该文件中有这一行,只要把前面的注释符号#去掉即可,没有的话就添加,或者修改:</p>

<p><code>xferlog_file=/var/log/vsftpd.log</code></p>

<h4 id="9-限制链接数-以及每个ip最大的链接数">9.限制链接数,以及每个IP最大的链接数</h4>

<p>修改配置文件中,例如vsftp最大支持链接数100个,每个IP能支持5个链接:</p>

<pre><code>max_client=100
max_per=5
</code></pre>

<h4 id="10-限制传输速度">10.限制传输速度</h4>

<pre><code>anon_max_rate=81920
local_max_rate=81920
</code></pre>

<p>修改配置文件中,例如让匿名用户和vsftd上的用户(即虚拟用户)都以80KB=1024*80=81920的速度下载</p>

<h4 id="11-将用户-一般指虚拟用户-限制在自家目录">11.将用户(一般指虚拟用户)限制在自家目录</h4>

<p>修改配置文件中,这样用户就只能访问自己家的目录了:</p>

<p><code>chroot_local_user=yes</code></p>

<p>如果只想某些用户仅能访问自己的目录,其它用户不做这个限制,那么就需要在chroot_list文件(此文件一般是在/etc/vsftpd/中)中添加此用户.</p>

<p>编辑此文件,比如将test用户添加到此文件中,那么将其写入即可.一般的话,一个用户占一行.</p>

<pre><code>[root@localhost vsftpd]# cat chroot_list
ftpuser
</code></pre>

<h4 id="12-绑定某个ip到vsftpd">12.绑定某个IP到vsFTPd</h4>

<p>有时候要限制某些IP访问服务器,只允许某些IP访问,例如只允许192.168.0.33访问这个FTP,同样修改配置文件:</p>

<p><code>listen_address=192.168.0.33</code></p>

<h4 id="13-配置vsftpd-conf">13.配置vsftpd.conf</h4>

<ul>
<li>anonymous_enable=NO            #禁止匿名</li>
<li>local_enable=YES                       #允许本地登录</li>
<li>write_enable=YES                        #允许写，如需上传，则必须</li>
<li>local_umask=027                        #将上传文件的权限设置为：777-local_umask</li>
<li>anon_upload_enable=YES          # 允许虚拟用户和匿名用户上传</li>
<li>anon_other_write_enable=YES #允许虚拟用户和匿名用户修改文件名和删除文件</li>
<li>dirmessage_enable=YES</li>
<li>xferlog_enable=YES                      #打开日志记录</li>
<li>connect_from_port_20=YES</li>
<li>xferlog_file=/var/log/vsftpd.log     #日志存放位置</li>
<li>xferlog_std_format=YES              #标准日志格式</li>
<li>idle_session_timeout=600        #空闲连接超时</li>
<li>data_connection_timeout=120</li>
<li>ftpd_banner=Welcome to ChinaRise FTP service       #欢迎信息</li>
<li>guest_enable=yes                       #允许虚拟用户</li>
<li>guest_username=vsftpdguest #虚拟用户使用的系统账号</li>

<li><p>virtual_use_local_privs=YES     #虚拟用户拥有本地系统权限</p></li>

<li><p>chroot_local_user=NO</p></li>

<li><p>chroot_list_enable=YES  #以上两行将虚拟用户限制在其目录下，不能访问其他目录，或者直接用
chroot_local_user=YES</p></li>

<li><p>listen=yes                #监听/被动模式</p></li>

<li><p>listen_port=21        #监听端口</p></li>

<li><p>chroot_list_file=/etc/vsftpd/vsftpd.chroot_list        #虚拟用户名单保存在文件/etc/vsftpd/vsftpd.chroot_list 中</p></li>

<li><p>user_config_dir=/etc/vsftpd/vsftpd_user_conf    #每个虚拟用户名的更加详细的培植保存在/etc/vsftpd/vsftpd_user_conf 中</p></li>
</ul>

<h4 id="虚拟用户其他设置">虚拟用户其他设置</h4>

<p>在/etc/vsftpd/vsftpd.chroot_list 文件中写入允许登陆的虚拟用户名称，每行一个</p>

<p>在/etc/vsftpd/vsftpd_user_conf 文件夹中创建一个以虚拟用户用户名命名的文件</p>

<p>写入： local_root = /var/FTP/子目录名</p>

<p>然后在/var/FTP下创建一个对应的目录即可</p>
</article>
    <footer class="post-footer">
      
      <ul class="post-tags">
        
          <li><a href="https://www.imxcz.com/tags/centos"><span class="tag">Centos</span></a></li>
        
          <li><a href="https://www.imxcz.com/tags/ftp"><span class="tag">Ftp</span></a></li>
        
      </ul>
      
      <p class="post-copyright">
        Link:<a rel='license' href='https://www.imxcz.com/wordpress/centos-ftp/'>https://www.imxcz.com/wordpress/centos-ftp/ </a><br>
          © 本文采用 <a rel='license' href='http://creativecommons.org/licenses/by-nc/4.0/' target=''>知识共享署名-非商业性使用 4.0 国际许可协议</a> 进行许可。文章发表于 <strong>1619</strong> 天前, 文章内容可能不准确，请酌情参考。
      </p>
      <div class="post-nav">
          
          <a href="https://www.imxcz.com/wordpress/win8-1-iis-php5-3-mysql-zendguardloader.html" class="prev" rel="prev" title="win8.1系统安装iis&#43;php5.3&#43;mysql&#43;ZendGuardLoader说明"> ← &nbsp;win8.1系统安装iis&#43;php5.3&#43;mysql&#43;ZendGuardLoader说明</a>
           
          
          <a href="https://www.imxcz.com/wordpress/wordpress-banjia-huanyuming.html" class="next" rel="next" title="WordPress程序完整搬家，包括更换域名，更改主机">WordPress程序完整搬家，包括更换域名，更改主机&nbsp; → </a>
          
      </div>
    </footer>
    
      
    
    </content>
    <sidebar>
        <div class="sidebar">
    <section class="widget-box">
        <h3 class="widget-title">分类</h3>
        <ul class="widget-categories">
            
            <li>
                <a href="https://www.imxcz.com/categories/%E5%A5%B3%E7%A5%9E/">女神(1)</a>
            </li>
            
            <li>
                <a href="https://www.imxcz.com/categories/%E6%8A%80%E6%9C%AF/">技术(18)</a>
            </li>
            
            <li>
                <a href="https://www.imxcz.com/categories/%E6%91%84%E5%BD%B1/">摄影(1)</a>
            </li>
            
            <li>
                <a href="https://www.imxcz.com/categories/%E8%AE%B0%E5%BD%95/">记录(2)</a>
            </li>
            
            <li>
                <a href="https://www.imxcz.com/categories/%E8%AE%BE%E8%AE%A1/">设计(1)</a>
            </li>
            
            <li>
                <a href="https://www.imxcz.com/categories/%E8%B5%84%E8%AE%AF/">资讯(1)</a>
            </li>
            
            <li>
                <a href="https://www.imxcz.com/categories/%E8%B6%A3%E9%97%BB/">趣闻(4)</a>
            </li>
            
            <li>
                <a href="https://www.imxcz.com/categories/%E8%BD%AF%E4%BB%B6/">软件(3)</a>
            </li>
            
        </ul>
    </section>
    <section class="widget-box">
        <h3 class="widget-title">标签</h3>
        <div class="tagcloud">
            
            <a href="https://www.imxcz.com/tags/apache/">apache</a>
            
            <a href="https://www.imxcz.com/tags/centos/">centos</a>
            
            <a href="https://www.imxcz.com/tags/css/">css</a>
            
            <a href="https://www.imxcz.com/tags/curl/">curl</a>
            
            <a href="https://www.imxcz.com/tags/ecshop/">ecshop</a>
            
            <a href="https://www.imxcz.com/tags/ftp/">ftp</a>
            
            <a href="https://www.imxcz.com/tags/gin/">gin</a>
            
            <a href="https://www.imxcz.com/tags/git/">git</a>
            
            <a href="https://www.imxcz.com/tags/golang/">golang</a>
            
            <a href="https://www.imxcz.com/tags/google/">google</a>
            
            <a href="https://www.imxcz.com/tags/htaccess/">htaccess</a>
            
            <a href="https://www.imxcz.com/tags/iis/">iis</a>
            
            <a href="https://www.imxcz.com/tags/jquery/">jquery</a>
            
            <a href="https://www.imxcz.com/tags/mac/">mac</a>
            
            <a href="https://www.imxcz.com/tags/msysgit/">msysgit</a>
            
            <a href="https://www.imxcz.com/tags/mysql/">mysql</a>
            
            <a href="https://www.imxcz.com/tags/php/">php</a>
            
            <a href="https://www.imxcz.com/tags/tortoisegit/">tortoisegit</a>
            
            <a href="https://www.imxcz.com/tags/vsftp/">vsftp</a>
            
            <a href="https://www.imxcz.com/tags/wordpress/">wordpress</a>
            
            <a href="https://www.imxcz.com/tags/%E4%BA%A7%E5%93%81%E7%BB%8F%E7%90%86/">产品经理</a>
            
            <a href="https://www.imxcz.com/tags/%E4%BB%A3%E7%90%86/">代理</a>
            
            <a href="https://www.imxcz.com/tags/%E5%8A%A0%E9%80%9F%E5%99%A8/">加速器</a>
            
            <a href="https://www.imxcz.com/tags/%E5%9B%BE%E7%89%87/">图片</a>
            
            <a href="https://www.imxcz.com/tags/%E5%9E%82%E7%9B%B4%E5%B1%85%E4%B8%AD/">垂直居中</a>
            
            <a href="https://www.imxcz.com/tags/%E5%9F%9F%E5%90%8D/">域名</a>
            
            <a href="https://www.imxcz.com/tags/%E5%A5%B3%E7%A5%9E/">女神</a>
            
            <a href="https://www.imxcz.com/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">小程序</a>
            
            <a href="https://www.imxcz.com/tags/%E5%B9%BD%E9%BB%98/">幽默</a>
            
            <a href="https://www.imxcz.com/tags/%E6%8B%8D%E7%85%A7/">拍照</a>
            
            <a href="https://www.imxcz.com/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">正则表达式</a>
            
            <a href="https://www.imxcz.com/tags/%E7%94%A8%E6%88%B7%E4%BD%93%E9%AA%8C/">用户体验</a>
            
            <a href="https://www.imxcz.com/tags/%E7%95%8C%E9%9D%A2%E8%AE%BE%E8%AE%A1/">界面设计</a>
            
            <a href="https://www.imxcz.com/tags/%E7%A0%81%E5%86%9C/">码农</a>
            
            <a href="https://www.imxcz.com/tags/%E7%A8%8B%E5%BA%8F%E5%91%98/">程序员</a>
            
            <a href="https://www.imxcz.com/tags/%E7%BD%91%E6%98%93uu/">网易uu</a>
            
            <a href="https://www.imxcz.com/tags/%E8%87%AA%E5%AE%9A%E4%B9%89/">自定义</a>
            
            <a href="https://www.imxcz.com/tags/%E8%BF%94%E5%9B%9E%E9%A1%B6%E9%83%A8/">返回顶部</a>
            
            <a href="https://www.imxcz.com/tags/%E9%AA%8C%E8%AF%81%E7%A0%81/">验证码</a>
            
            <a href="https://www.imxcz.com/tags/%E9%AB%98%E5%9C%86%E5%9C%86/">高圆圆</a>
            
        </div>
    </section>
    
    <section class="widget-box">
        <h3 class="widget-title">友情链接</h3>
        <ul class="widget-links">
            
            <li>
                <a target="_blank" href="https://www.simianti.cn" title="实验室一站式服务平台">四面体科技</a>
            </li>
            
        </ul>
    </section>
    
    <section class="widget-box">
            <h3 class="widget-title">其他</h3>
            <ul class="widget-links">
                    <li><a href="https://www.imxcz.com/index.xml">文章 RSS</a></li>
                </ul>
        </section>
</div>
      </sidebar>
  </section>
  


<footer class="site-footer">
  <p>© 2012-2019 幸存者IMxcz.Com</p>
  <p>Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> with theme <a href="http://www.imxcz.com" target="_blank" rel="noopener">Imxcz</a>.</p>
  
    <p><a href="http://www.miitbeian.gov.cn" title="Check ICP info" target="_blank" rel="noopener">豫ICP备12022851号-2</a></p>
  
</footer>


<script src="https://cdn.jsdelivr.net/npm/smooth-scroll@15.0.0/dist/smooth-scroll.min.js"></script>



<script async src="https://cdn.jsdelivr.net/npm/video.js@7.3.0/dist/video.min.js"></script>




<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\\[','\\]']],
      processEscapes: true,
      processEnvironments: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      TeX: { equationNumbers: { autoNumber: "AMS" },
      extensions: ["AMSmath.js", "AMSsymbols.js"] }
    },
  });
</script>
<script type="text/x-mathjax-config">
  // Fix <code> tags after MathJax finishes running. This is a
  // hack to overcome a shortcoming of Markdown. Discussion at
  // https://github.com/mojombo/jekyll/issues/199
  MathJax.Hub.Queue(() => {
    MathJax.Hub.getAllJax().map(v => v.SourceElement().parentNode.className += ' has-jax');
  });
</script>



<script src="https://www.imxcz.com/scripts/index.min.js"></script>

<script>
  
  
  
  
  
</script>




<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-XXXXXXXX-X', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>







  </body>
</html>
